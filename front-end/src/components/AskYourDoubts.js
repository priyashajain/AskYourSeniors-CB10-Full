// import React from "react";
// import "./AskYourDoubts.css";

// const AskYourDoubts = () => {
//     return (
//         <div>

//             <div class="complete">
//                 <div class="left-border">


//                 </div>
//                 <div class="right-area">
//                     <div class="nav-container">
//                         <div class="cb-logo-container">

//                                 <img src="../ASSETS/Frame 21.svg" class="cb-logo-container-img" alt="" />
//                                 </div>

//                                 <div class="nav-items-container">
//                                     <ul>
//                                         <li><a href="#" class="ayd">Ask Your Doubts</a></li>
//                                         <li><a href="Leaderboard\Leaderboard.html" class="leaderboard">Leaderboard</a></li>
//                                         <li><a href="" class="about">About</a></li>
//                                         <li><a href="New\index.html" class="quiz">Quiz</a></li>
//                                     </ul>
//                                 </div>

//                                 <div class="profile-container">
//                                     <div class="student-name-and-arrow-container">
//                                         <p>Student Name</p>
//                                         <img src="../ASSETS/Keyboard arrow down.svg" alt="" />

//                                             </div>

//                                             <img src="../ASSETS/10.svg" alt="" />
//                                             </div>
//                                     </div>


//                                     <form action="">
//                                         <div class="search-container">
//                                             <input type="text" placeholder="Search Category" class="search-bar" />

//                                                 <button class="search-category-button">
//                                                     <p>Category</p><img src="../ASSETS/Category_Button_Arrow_Vector.svg" alt="" />
//                                                 </button>
//                                         </div>
//                                     </form>


//                                     <div class="post-doubt-container">
//                                         <input type="text" class="post-doubt-input-box" placeholder="Ask Your Doubt" />

//                                             <div class="post-doubt-button-container">
//                                                 <button class="post-doubt-category-button">
//                                                     <p>Category</p><img src="../ASSETS/Category_Button_Arrow_Vector.svg" alt="" />
//                                                 </button>

//                                                 <button class="post-doubt-post-button">
//                                                     <p>Post</p>
//                                                 </button>
//                                             </div>

//                                     </div>



//                                     <div class="main-container">
//                                         <div class="buttons-container">
//                                             <button class="question-section-button">
//                                                 <p>All Questions</p>
//                                             </button>
//                                             <button class="question-section-button">
//                                                 <p>Your Questions</p>
//                                             </button>
//                                             <button class="question-section-button">
//                                                 <p>Your Answers</p>
//                                             </button>
//                                         </div>


//                                             <div class="question-grey-container">
//                                                 <div class="question-main-container">

//                                                     <div class="info-container">
//                                                         <div class="student-info-container">
//                                                             <img src="../ASSETS/10.svg" alt="" />
//                                                                 <div class="student-info">
//                                                                     <p class="name">Student Name</p>
//                                                                     <p class="branch-year">ECE, 2024</p>
//                                                                 </div>
//                                                         </div>
//                                                         <div class="category-like-container">
//                                                             <div class="category">
//                                                                 <p>Programming</p>
//                                                             </div>
//                                                             <img src="../ASSETS/Favorite.svg" alt="" />
//                                                         </div>
//                                                     </div>

//                                                     <div class="question">
//                                                         <p>Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing
//                                                             elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam
//                                                             elementum tortor a nibh maximus, id porta est accumsan.</p>
//                                                     </div>

//                                                     <a href="">
//                                                         <div class="answer-container">
//                                                             <img src="../ASSETS/Message.svg" alt="" />
//                                                                 <p>Answers</p>
//                                                         </div>
//                                                     </a>
//                                                 </div>
//                                             </div>


//                                                 <div class="question-grey-container">
//                                                     <div class="question-main-container">

//                                                         <div class="info-container">
//                                                             <div class="student-info-container">
//                                                                 <img src="../ASSETS/10.svg" alt="" />
//                                                                     <div class="student-info">
//                                                                         <p class="name">Student Name</p>
//                                                                         <p class="branch-year">ECE, 2024</p>
//                                                                     </div>
//                                                             </div>
//                                                             <div class="category-like-container">
//                                                                 <div class="category">
//                                                                     <p>Programming</p>
//                                                                 </div>
//                                                                 <img src="../ASSETS/Favorite.svg" alt="" />
//                                                             </div>
//                                                         </div>

//                                                         <div class="question">
//                                                             <p>Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing
//                                                                 elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam
//                                                                 elementum tortor a nibh maximus, id porta est accumsan.</p>
//                                                         </div>

//                                                         <a href="">
//                                                             <div class="answer-container">
//                                                                 <img src="../ASSETS/Message.svg" alt="" />
//                                                                     <p>Answers</p>
//                                                             </div>
//                                                         </a>
//                                                     </div>
//                                                 </div>


//                                                     <div class="question-grey-container">
//                                                         <div class="question-main-container">

//                                                             <div class="info-container">
//                                                                 <div class="student-info-container">
//                                                                     <img src="../ASSETS/10.svg" alt="" />
//                                                                         <div class="student-info">
//                                                                             <p class="name">Student Name</p>
//                                                                             <p class="branch-year">ECE, 2024</p>
//                                                                         </div>
//                                                                 </div>
//                                                                 <div class="category-like-container">
//                                                                     <div class="category">
//                                                                         <p>Programming</p>
//                                                                     </div>
//                                                                     <img src="../ASSETS/Favorite.svg" alt="" />
//                                                                 </div>
//                                                             </div>

//                                                             <div class="question">
//                                                                 <p>Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing
//                                                                     elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam
//                                                                     elementum tortor a nibh maximus, id porta est accumsan.</p>
//                                                             </div>

//                                                             <a href="">
//                                                                 <div class="answer-container">
//                                                                     <img src="../ASSETS/Message.svg" alt="" />
//                                                                         <p>Answers</p>
//                                                                 </div>
//                                                             </a>
//                                                         </div>
//                                                     </div>


//                                                         <div class="question-grey-container">
//                                                             <div class="question-main-container">

//                                                                 <div class="info-container">
//                                                                     <div class="student-info-container">
//                                                                         <img src="../ASSETS/10.svg" alt="" />
//                                                                             <div class="student-info">
//                                                                                 <p class="name">Student Name</p>
//                                                                                 <p class="branch-year">ECE, 2024</p>
//                                                                             </div>
//                                                                     </div>
//                                                                     <div class="category-like-container">
//                                                                         <div class="category">
//                                                                             <p>Programming</p>
//                                                                         </div>
//                                                                         <img src="../ASSETS/Favorite.svg" alt="" />
//                                                                     </div>
//                                                                 </div>

//                                                                 <div class="question">
//                                                                     <p>Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing
//                                                                         elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam
//                                                                         elementum tortor a nibh maximus, id porta est accumsan.</p>
//                                                                 </div>

//                                                                 <a href="">
//                                                                     <div class="answer-container">
//                                                                         <img src="../ASSETS/Message.svg" alt="" />
//                                                                             <p>Answers</p>
//                                                                     </div>
//                                                                 </a>
//                                                             </div>
//                                                         </div>

//                                                     </div>




//                                                 </div>

//                                                 <a href="">
//                                                     <div class="chatbot-container">
//                                                         <img src="../ASSETS/Message_chatbot.svg" alt="" />
//                                                     </div>
//                                                 </a>

//                                             </div>

//                                         </div>
//                                         );
// }

//                                         export default AskYourDoubts;





/* eslint-disable */
import React, { useState, useEffect } from "react";
import "./AskYourDoubts.css";
import Question from "./components/Question";
import CreateQuestion from "./components/CreateQuestion";
import Navbar from "./components/Navbar";
import Search from "./components/Search";
import Chatbot from "./components/Chatbot";
import LeftBorder from "./components/LeftBorder";
import QuestionForUpdDel from "./components/QuestionForUpdDel";
import 'bootstrap/dist/css/bootstrap.min.css';


const AskYourDoubts = () => {

  const [user, setUser] = useState({
    _id: "", email: "", password: "", fName: "", lName: "", branch: "", year: ""
  });

  useEffect(() => {
    getUserById();
    addQuestion();
    getQuestionsByUserId();
    getAnswersByUserId();
  });

  const [navbarName, setNavbarName] = useState("");

  const [questions, setQuestions] = useState([]);

  const [nquestions, setnQuestions] = useState([]);

  const [myQuestions, setMyQuestions] = useState([]);
  const [myAnswers, setMyAnswers] = useState([]);

  const [isAllQuestionsButtonActive, setAllQuestionsButton] = useState(true);
  const [isMyQuestionsButtonActive, setMyQuestionsButton] = useState(false);
  const [isMyAnswersButtonActive, setMyAnswersButton] = useState(false);

  // function addQuestion(question) {
  //   // setQuestions(prevQuestions => {
  //   //   return [...prevQuestions, question];
  //   // });
  // }

  const addQuestion = async () => {
    let result = await fetch(`http://localhost:5000/questions`);
    result = await result.json();
    // console.log(result);
    setnQuestions(result.filter(adminQuestion => adminQuestion.approved === true));
  }

  const getQuestionsByUserId = async () => {
    const authForMyQuestions = localStorage.getItem("user");
    const useridForMyQuestions = JSON.parse(authForMyQuestions)._id;
    let resultMyQuestions = await fetch(`http://localhost:5000/questions-from-user-id/${useridForMyQuestions}`);
    resultMyQuestions = await resultMyQuestions.json();
    // console.log(result);

    setMyQuestions(resultMyQuestions.filter(adminQuestion => adminQuestion.approved === true));  //
  }

  const getAnswersByUserId = async () => {
    const authForMyAnswers = localStorage.getItem("user");
    const useridForMyAnswers = JSON.parse(authForMyAnswers)._id;
    let resultMyAnswers = await fetch(`http://localhost:5000/answers-from-user-id/${useridForMyAnswers}`);
    resultMyAnswers = await resultMyAnswers.json();
    // console.log(result);

    setMyAnswers(resultMyAnswers.filter(adminQuestion => adminQuestion.approved === true));  //
  }

  const getUserById = async () => {
    const auth = localStorage.getItem("user");
    const idFetched = JSON.parse(auth)._id;
  
    let result = await fetch(`http://localhost:5000/user/${idFetched}`);
    result = await result.json();
    setNavbarName(`${result.fName} ${result.lName}`);
    // setUser(result);
  }

  const handleAllQuestionsButton = () => {
    setAllQuestionsButton(true);
    setMyQuestionsButton(false);
    setMyAnswersButton(false);

    // alert(isAllQuestionsButtonActive);
    // alert(isMyQuestionsButtonActive);
    // alert(isMyAnswersButtonActive);
    // console.log("isAllQuestionsButtonActive", isAllQuestionsButtonActive);
    // console.log("isMyQuestionsButtonActive", isMyQuestionsButtonActive);
    // console.log("isMyAnswersButtonActive", isMyAnswersButtonActive);
  }

  const handleMyQuestionsButton = () => {
    setAllQuestionsButton(false);
    setMyQuestionsButton(true);
    setMyAnswersButton(false);

    // alert(isAllQuestionsButtonActive);
    // alert(isMyQuestionsButtonActive);
    // alert(isMyAnswersButtonActive);
    // console.log("isAllQuestionsButtonActive", isAllQuestionsButtonActive);
    // console.log("isMyQuestionsButtonActive", isMyQuestionsButtonActive);
    // console.log("isMyAnswersButtonActive", isMyAnswersButtonActive);
  }

  const handleMyAnswersButton = () => {
    setAllQuestionsButton(false);
    setMyQuestionsButton(false);
    setMyAnswersButton(true);

    // alert(isAllQuestionsButtonActive);
    // alert(isMyQuestionsButtonActive);
    // alert(isMyAnswersButtonActive);
    // console.log("isAllQuestionsButtonActive", isAllQuestionsButtonActive);
    // console.log("isMyQuestionsButtonActive", isMyQuestionsButtonActive);
    // console.log("isMyAnswersButtonActive", isMyAnswersButtonActive);
  }



  return (
    <div className="complete">
      <LeftBorder />

      <div className="right-area">

        <Navbar navbarName={navbarName}/>

        <Search />

        {/* <CreateQuestion onAdd={addQuestion} /> */}
        <CreateQuestion />

        <div className="main-container">
          <div className="buttons-container">
            <button className="question-section-button" onClick={handleAllQuestionsButton}>
              <p>All Questions</p>
            </button>
            <button className="question-section-button" onClick={handleMyQuestionsButton}>
              <p>Your Questions</p>
            </button>
            <button className="question-section-button" onClick={handleMyAnswersButton}>
              <p>Your Answers</p>
            </button>
          </div>

          {isAllQuestionsButtonActive ? <div><h1>All Questions</h1></div> : null}
          {isMyQuestionsButtonActive ? <div><h1>My Questions</h1></div> : null}
          {isMyAnswersButtonActive ? <div><h1>My Answers</h1></div> : null}

          {/* {questions.map((questionItem, index) => {
            return (
              <Question
                key={index}
                id={index}
                fName={questionItem.fName}
                lName={questionItem.lName}
                branch={questionItem.branch}
                year={questionItem.year}
                category={questionItem.category}
                content={questionItem.content}
              />
            );
          })} */}

          {isAllQuestionsButtonActive ? <div className="main-container">{nquestions.map((nquestionItem, index) => {
            return (
              <Question
                key={index}
                id={index}
                questionId={nquestionItem._id}                //added
                fName={nquestionItem.user.fName}
                lName={nquestionItem.user.lName}
                branch={nquestionItem.user.branch}
                year={nquestionItem.user.year}
                // category={questionItem.category}
                // content={questionItem.content}
                content={nquestionItem.content}
                category={nquestionItem.category}
              />
            );
          })}

            {/* <Question
              fName="Student"
              lName="Name"
              branch="ECE"
              year="2024"
              category="Programming"
              content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
            /> */}
            {/* <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          />
          <Question fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit" />
          <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          /> */}</div> : null}



          {isMyQuestionsButtonActive ? <div className="main-container">{myQuestions.map((nquestionItem, index) => {
            return (
              <Question
                key={index}
                id={index}
                questionId={nquestionItem._id}                //added
                fName={nquestionItem.user.fName}
                lName={nquestionItem.user.lName}
                branch={nquestionItem.user.branch}
                year={nquestionItem.user.year}
                // category={questionItem.category}
                // content={questionItem.content}
                content={nquestionItem.content}
                category={nquestionItem.category}
              />
            );
          })}

            {/* <Question
              fName="Student"
              lName="Name"
              branch="ECE"
              year="2024"
              category="Programming"
              content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
            /> */}
            {/* <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          />
          <Question fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit" />
          <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          /> */}</div> : null}



          {/* {isMyAnswersButtonActive ? <div className="main-container">{myAnswers.map((myAnswerItem, index) => {
            return (
              <Question
                key={index}
                id={index}
                questionId={myAnswerItem.question._id}                
                fName={myAnswerItem.question.user.fName}
                lName={myAnswerItem.question.user.lName}
                branch={myAnswerItem.question.user.branch}
                year={myAnswerItem.question.user.year}
                content={myAnswerItem.question.content}
                category={myAnswerItem.question.category}
              />
            );
          })}

            <Question
              fName="Student"
              lName="Name"
              branch="ECE"
              year="2024"
              category="Programming"
              content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
            />
            </div> : null}
 */}



          {isMyAnswersButtonActive ? <div className="main-container">{myAnswers.map((myAnswerItem, index) => {
            return (
              <QuestionForUpdDel
                key={index}
                id={index}
                answerSent={myAnswerItem}
                questionId={myAnswerItem.question._id}                //added
                fName={myAnswerItem.question.user.fName}
                lName={myAnswerItem.question.user.lName}
                branch={myAnswerItem.question.user.branch}
                year={myAnswerItem.question.user.year}
                // category={questionItem.category}
                // content={questionItem.content}
                content={myAnswerItem.question.content}
                category={myAnswerItem.question.category}
              />
            );
          })}

            {/* <Question
              fName="Student"
              lName="Name"
              branch="ECE"
              year="2024"
              category="Programming"
              content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
            /> */}
            {/* <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          />
          <Question fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit" />
          <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          /> */}</div> : null}




          <br />
          <br />
          <br />
          <br />
          <br />
          <br />

          {/* {nquestions.map((nquestionItem, index) => {
            return (
              <Question
                key={index}
                id={index}
                questionId={nquestionItem._id}                
                fName={nquestionItem.user.fName}
                lName={nquestionItem.user.lName}
                branch={nquestionItem.user.branch}
                year={nquestionItem.user.year}
                
                content={nquestionItem.content}
                category={nquestionItem.category}
              />
            );
          })}

          <Question
            fName="Student"
            lName="Name"
            branch="ECE"
            year="2024"
            category="Programming"
            content="Lorem ipsum dolor sit ametLorem ipsum dolor sit ametLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vel tristique orci. Nam neque leo, rutrum et nulla quis, ullamcorper varius nisl. Aliquam elementum tortor a nibh maximus, id porta est accumsan.elit"
          /> */}
          

        </div>




      </div>

      <Chatbot />

    </div>
  );
}

export default AskYourDoubts;
